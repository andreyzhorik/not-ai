<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>NOT AI ‚Äì Chat UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  /* === THEME === */
  :root {
    --bg: #0a0f1c;
    --panel: #10182a;
    --accent: #3b82f6;
    --accent-soft: #1d4ed8;
    --muted: #94a3b8;
    --text: #e5eaf5;
    --radius: 16px;
    --shadow: 0 10px 30px rgba(0,0,0,0.3);
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: linear-gradient(180deg, var(--bg), #060b17);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* === APP CONTAINER === */
  .app {
    width: 95%;
    max-width: 800px;
    height: 90vh;
    display: flex;
    flex-direction: column;
    background: var(--panel);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.05);
  }

  /* === HEADER === */
  header {
    padding: 18px 22px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255,255,255,0.02);
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .brand {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo {
    width: 42px;
    height: 42px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), var(--accent-soft));
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    font-size: 1.1rem;
    color: #fff;
    box-shadow: 0 4px 15px rgba(59,130,246,0.3);
  }

  .title {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--accent);
  }

  .subtitle {
    font-size: 0.85rem;
    color: var(--muted);
  }

  .controls {
    display: flex;
    gap: 10px;
  }

  .btn {
    background: rgba(255,255,255,0.05);
    color: var(--text);
    border: none;
    padding: 8px 14px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn:hover {
    background: rgba(255,255,255,0.1);
  }

  .btn.primary {
    background: var(--accent);
    color: #fff;
  }

  .btn.primary:hover {
    background: var(--accent-soft);
  }

  /* === CHAT BOX === */
  .chat-box {
    flex: 1;
    padding: 22px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .msg {
    max-width: 75%;
    padding: 12px 16px;
    border-radius: 14px;
    line-height: 1.5;
    font-size: 1rem;
    word-wrap: break-word;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }

  .msg.assistant {
    align-self: flex-start;
    background: #162037;
    color: #e5eaf5;
    border-bottom-left-radius: 6px;
  }

  .msg.user {
    align-self: flex-end;
    background: linear-gradient(135deg, var(--accent-soft), var(--accent));
    color: white;
    border-bottom-right-radius: 6px;
  }

  .meta {
    margin-top: 4px;
    font-size: 0.75rem;
    color: var(--muted);
    text-align: right;
  }

  /* === INPUT AREA === */
  footer {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px;
    background: #0d1525;
    border-top: 1px solid rgba(255,255,255,0.05);
  }

  textarea {
    flex: 1;
    background: #0c1222;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    color: var(--text);
    padding: 12px;
    font-size: 1rem;
    resize: none;
    height: 50px;
    outline: none;
  }

  textarea::placeholder {
    color: var(--muted);
  }

  button.send {
    background: var(--accent);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 6px 18px rgba(59,130,246,0.3);
    transition: all 0.2s ease;
  }

  button.send:hover {
    background: var(--accent-soft);
  }

  /* === SCROLL === */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
  }

  @media (max-width: 640px) {
    .app { height: 100vh; border-radius: 0; }
    header { padding: 14px; }
    footer { padding: 10px; }
  }
</style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">N</div>
        <div>
          <div class="title">NOT AI</div>
          <div class="subtitle">Local & Private Chat UI</div>
        </div>
      </div>
      <div class="controls">
        <button class="btn">New</button>
        <button class="btn primary">Connect</button>
      </div>
    </header>

    <main class="chat-box">
      <div class="msg assistant">Hello! I‚Äôm your AI assistant. How can I help today?</div>
      <div class="msg user">Hi there! Just testing the new interface.</div>
      <div class="msg assistant">Looks great ‚Äî I love this clean design!</div>
    </main>

    <footer>
      <textarea placeholder="Type your message..."></textarea>
      <button class="send">Send</button>
    </footer>
  </div>

  <script>
    const WORKER_URL = "plain-pine-b32a.mrviktor2426.workers.dev";
    const INVITE_KEY = "invite_code";

    const providerSelect = document.getElementById("provider");
    const promptInput = document.getElementById("prompt");
    const sendBtn = document.getElementById("send");
    const chatDiv = document.getElementById("chat");

    function showMessage(msg) {
      chatDiv.textContent += msg + "\n";
    }

    providerSelect.addEventListener("change", async () => {
      const selected = providerSelect.selectedOptions[0];
      if (selected.dataset.locked === "true") {
        const savedCode = localStorage.getItem(INVITE_KEY);
        if (!savedCode) {
          const code = prompt("üîí This model requires an invite code:");
          if (!code) {
            alert("No code entered ‚Äî reverting to free model.");
            providerSelect.value = "gpt-4o-mini";
            return;
          }
          const res = await fetch(`${WORKER_URL}?verify_code=${code}`);
          const data = await res.json();
          if (data.valid) {
            localStorage.setItem(INVITE_KEY, code);
            alert("‚úÖ Code accepted ‚Äî unlocked!");
          } else {
            alert("‚ùå Invalid invite code.");
            providerSelect.value = "gpt-4o-mini";
          }
        }
      }
    });

    sendBtn.onclick = async () => {
      const provider = providerSelect.value;
      const prompt = promptInput.value.trim();
      if (!prompt) return alert("Enter a message!");

      showMessage("üß† You: " + prompt);
      promptInput.value = "";

      try {
        const res = await fetch(WORKER_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            provider,
            messages: [{ role: "user", content: prompt }],
          }),
        });

        const data = await res.json();
        if (data.error) {
          showMessage("‚ùå Error: " + JSON.stringify(data));
        } else {
          const reply = data.choices?.[0]?.message?.content || "‚ö†Ô∏è No reply";
          showMessage("ü§ñ AI: " + reply);
        }
      } catch (err) {
        showMessage("‚ö†Ô∏è Network error: " + err.message);
      }
    };
  </script>
</body>
</html>
