<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>NOT AI ‚Äì GPT Multi-Model</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
  --bg:#0b1220;--panel:#071025;--muted:#94a3b8;--accent:#60a5fa;
  --primary:#2563eb;--danger:#dc2626;--card:#0f1720;
  --bubble-assistant:#0f1726;--bubble-user:#1d4ed8;
  --radius:12px;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#041023);color:#e6eef8}
.app{max-width:900px;margin:18px auto;height:calc(100vh - 36px);display:flex;flex-direction:column;
  border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
  box-shadow:0 8px 30px rgba(2,6,23,0.6);}
header.app-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;gap:12px;
  background:linear-gradient(90deg,rgba(255,255,255,0.01),transparent);
  border-bottom:1px solid rgba(255,255,255,0.03);}
.brand{display:flex;gap:12px;align-items:center;}
.logo{width:36px;height:36px;border-radius:9px;background:linear-gradient(135deg,var(--accent),var(--primary));
  display:flex;align-items:center;justify-content:center;font-weight:800;color:#001;
  box-shadow:0 3px 10px rgba(37,99,235,0.12);}
.title{font-weight:700;font-size:1rem;color:var(--accent)}
.subtitle{font-size:0.8rem;color:var(--muted);margin-top:2px}
.controls{display:flex;gap:10px;align-items:center;}
.btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);
  padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:0.9rem;display:inline-flex;gap:8px;align-items:center;}
.btn.primary{background:var(--primary);border:none;color:white;box-shadow:0 6px 14px rgba(37,99,235,0.12)}
.btn.danger{background:var(--danger);border:none;color:white}
.btn:disabled{opacity:.6;cursor:not-allowed}
main.chat{display:flex;flex-direction:column;flex:1;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);}
#chat-box{padding:18px;overflow:auto;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth;}
.msg{max-width:78%;padding:10px 14px;border-radius:12px;line-height:1.4;white-space:pre-wrap;
  box-shadow:0 4px 14px rgba(2,6,23,0.45);animation:fadeIn .12s ease-out;}
.meta{font-size:.75rem;color:var(--muted);margin-top:6px;text-align:right;opacity:.85}
.user{align-self:flex-end;background:linear-gradient(135deg,var(--bubble-user),#2563eb);color:#fff;border-bottom-right-radius:6px;}
.assistant{align-self:flex-start;background:var(--bubble-assistant);color:#e6eef8;border-bottom-left-radius:6px;}
.loading{font-style:italic;color:var(--muted)}
footer.input-area{padding:12px;display:flex;gap:10px;align-items:flex-end;border-top:1px solid rgba(255,255,255,0.02);background:var(--panel);}
textarea#input{flex:1;min-height:48px;max-height:160px;resize:vertical;padding:12px;border-radius:10px;
  border:1px solid rgba(255,255,255,0.03);background:#041326;color:#e6eef8;outline:none;font-size:1rem;}
.toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%);
  background:rgba(0,0,0,0.6);color:white;padding:10px 14px;border-radius:10px;font-weight:600;display:none;}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@media(max-width:640px){.app{height:100vh;margin:0;border-radius:0}.subtitle{display:none}#chat-box{padding:12px}}
</style>
</head>
<body>
<div class="app">
  <header class="app-header">
    <div class="brand">
      <div class="logo">N</div>
      <div><div class="title">NOT AI</div><div class="subtitle">Multi-Model Chat Client</div></div>
    </div>
    <div class="controls">
      <select id="provider">
        <option value="gpt-4o-mini">GPT-4o Mini (Free)</option>
        <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
        <option value="gpt-4o" data-locked="true">GPT-4o üîí</option>
        <option value="gpt-5-mini" data-locked="true">GPT-5 Mini üîí</option>
      </select>
      <button id="clear-btn" class="btn danger">Clear</button>
    </div>
  </header>

  <main class="chat"><div id="chat-box"></div></main>

  <footer class="input-area">
    <textarea id="input" placeholder="Type message..."></textarea>
    <button id="send" class="btn primary">Send</button>
  </footer>
</div>
<div id="toast" class="toast"></div>

<script>
const WORKER_URL = "https://plain-pine-b32a.mrviktor2426.workers.dev";
const chatBox=document.getElementById("chat-box"),input=document.getElementById("input"),
sendBtn=document.getElementById("send"),clearBtn=document.getElementById("clear-btn"),
providerSelect=document.getElementById("provider"),toast=document.getElementById("toast");
const INVITE_KEY="invite_code";
let user_id=localStorage.getItem("user_id")||crypto.randomUUID();
localStorage.setItem("user_id",user_id);
let messages=JSON.parse(localStorage.getItem("chatMemory")||"[]");renderChat();

providerSelect.addEventListener("change",async()=>{
  const selected=providerSelect.selectedOptions[0];
  if(selected.dataset.locked==="true"){
    const saved=localStorage.getItem(INVITE_KEY);
    if(saved)return showToast("‚úÖ Access granted for "+selected.textContent);
    const code=prompt("üîí This model requires an invite code:");
    if(!code){providerSelect.value="gpt-4o-mini";return showToast("‚ùå No code entered.");}
    try{
      const res=await fetch(`${WORKER_URL}?verify_code=${code}`),data=await res.json();
      if(data.valid){localStorage.setItem(INVITE_KEY,code);showToast("‚úÖ Code accepted ‚Äì "+selected.textContent+" unlocked!");}
      else{showToast("‚ùå Invalid invite code.");providerSelect.value="gpt-4o-mini";}
    }catch{showToast("‚ö†Ô∏è Verification error.");providerSelect.value="gpt-4o-mini";}
  }
});

sendBtn.onclick=sendMessage;
input.onkeydown=e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();sendMessage();}};
clearBtn.onclick=()=>{localStorage.removeItem("chatMemory");messages=[];renderChat();showToast("Chat cleared.");};

async function sendMessage(){
  const text=input.value.trim();if(!text)return;
  appendMessage("user",text);input.value="";messages.push({role:"user",content:text});
  saveMem();appendMessage("assistant","Thinking...",true);
  try{
    const res=await fetch(WORKER_URL,{method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({user_id,provider:providerSelect.value,messages:[{role:"user",content:text}]})});
    if(!res.ok)throw new Error(await res.text());
    const data=await res.json();
    const reply=data.choices?.[0]?.message?.content||data.choices?.[0]?.text||"No reply.";
    replaceLastAssistantMessage(reply);messages.push({role:"assistant",content:reply});saveMem();
  }catch(err){replaceLastAssistantMessage("‚ùå Error: "+err.message);}
}

function appendMessage(r,t,l){const w=document.createElement("div");w.className=`msg ${r}`+(l?" loading":"");
w.innerHTML=`<div>${t}</div><div class="meta">${new Date().toLocaleTimeString()}</div>`;chatBox.append(w);scroll();}
function replaceLastAssistantMessage(t){const n=chatBox.querySelectorAll(".assistant");if(!n.length)return;
const m=n[n.length-1];m.classList.remove("loading");m.firstChild.textContent=t;}
function renderChat(){chatBox.innerHTML="";messages.forEach(m=>appendMessage(m.role,m.content));scroll();}
function scroll(){requestAnimationFrame(()=>chatBox.scrollTop=chatBox.scrollHeight);}
function saveMem(){localStorage.setItem("chatMemory",JSON.stringify(messages));}
function showToast(t){toast.textContent=t;toast.style.display="block";setTimeout(()=>toast.style.display="none",2000);}
</script>
</body>
</html>
